---
defaultNamespace: logging
namespaceLabels:
  lsst.io/discover: "true"
labels:
  bundle: &name logging-pre
helm:
  releaseName: *name
  takeOwnership: true
  force: true
  waitForJobs: true
  atomic: false
dependsOn:
  - selector:
      matchLabels:
        bundle: cert-manager-conf
  - selector:
      matchLabels:
        bundle: external-secrets-conf
targetCustomizations:
  # first match is used
  - name: ayekan
    clusterName: ayekan
    yaml:
      overlays:
        - ayekan
  - name: dev
    clusterSelector:
      matchLabels:
        site: dev
    yaml:
      overlays:
        - dev
  - name: tu
    clusterSelector:
      matchLabels:
        site: tu
    yaml:
      overlays:
        - tu
  - name: ls
    clusterSelector:
      matchLabels:
        site: ls
    yaml:
      overlays:
        - ls
diff:
  comparePatches:
    - apiVersion: cert-manager.io/v1
      kind: Certificate
      namespace: logging
      operations:
        - op: "remove"
          path: "/spec/duration"
        - op: "remove"
          path: "/spec/renewBefore"
